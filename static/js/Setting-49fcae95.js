import{a as e,u as t,b as a,c as l,n as i,f as s}from"./index-ef4adf80.js";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-w"},[a("el-form",{ref:"formRef",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"application_key_id",prop:"application_key_id"}},[a("el-input",{attrs:{placeholder:"请填写应用程序密钥id"},model:{value:e.form.application_key_id,callback:function(t){e.$set(e.form,"application_key_id",t)},expression:"form.application_key_id"}})],1),a("el-form-item",{attrs:{label:"application_key",prop:"application_key"}},[a("el-input",{attrs:{"show-password":"",placeholder:"请填写应用程序密钥"},model:{value:e.form.application_key,callback:function(t){e.$set(e.form,"application_key",t)},expression:"form.application_key"}})],1),a("el-form-item",{attrs:{label:"host_url(图床自定义域名)",prop:"host_url"}},[a("el-input",{attrs:{placeholder:"请填写地址,eg: https://cloud.mr90.top/file/imagecloud/ 注意:结尾必须加 ‘/’"},model:{value:e.form.host_url,callback:function(t){e.$set(e.form,"host_url",t)},expression:"form.host_url"}})],1),a("el-form-item",{attrs:{label:" bucket_name",prop:"bucket_name"}},[a("el-input",{attrs:{placeholder:"请填写存储桶名称"},model:{value:e.form.bucket_name,callback:function(t){e.$set(e.form,"bucket_name",t)},expression:"form.bucket_name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("formRef")}}},[e._v("保存本地")]),a("el-button",{on:{click:function(t){return e.resetForm("formRef")}}},[e._v("重置")])],1)],1)],1)},n=[];o._withStripped=!0;const r={data(){return{form:{application_key_id:"",application_key:"",bucket_name:"",host_url:""},rules:{application_key_id:[{required:!0,message:"请输入application_key_id",trigger:"blur"},{min:5,max:50,message:"长度在 5 到 50 个字符",trigger:"blur"}],application_key:[{required:!0,message:"请输入application_key",trigger:"blur"},{min:5,max:50,message:"长度在 5 到 50 个字符",trigger:"blur"}],bucket_name:[{required:!0,message:"请输入bucket_name",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],host_url:[{required:!0,validator:this.validateURL,trigger:"blur"}]}}},computed:{...e(t,["isLogined"])},mounted(){const e=localStorage.getItem("token_api");e&&(this.form=JSON.parse(e))},methods:{...a(t,["handleIsLogined"]),validateURL:(e,t,a)=>{"/"===t.charAt(t.length-1)&&0!==t.length?a():a(new Error("请输入图片地址前缀，输入的连接结尾必须加 /"))},submitForm:l((function(e){this.$refs[e].validate((e=>{if(!e)return!1;localStorage.setItem("token_api",JSON.stringify(this.form)),localStorage.removeItem("authmsg"),ELEMENT.Notification({title:"提示",message:"已将数据缓冲到本地，数据信息仅本人可知",type:"success"}),this.handleIsLogined(this.form.host_url)}))}),400,!0),resetForm(e){this.$refs[e].resetFields()}}},u={};var c=i(r,o,n,!1,p,"4c16d965",null,null);function p(e){for(let t in u)this[t]=u[t]}c.options.__file="src/views/formview/FormView.vue";const m=function(){return c.exports}();var f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"set-prefix"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleSelect},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.prefixImg.support,(function(e){return a("el-option",{key:e.url,attrs:{label:e.label,value:e.url}})})),1),a("el-input",{attrs:{placeholder:"请选择图床管理页面图片地址前缀",disabled:!0},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},v=[];f._withStripped=!0;const d={data:()=>({value:""}),computed:{...e(t,["prefixImg"]),...e(t,["noInvalid"]),...e(t,["prefixStatus"])},watch:{noInvalid:{deep:!0,handler(e){e&&(this.value=this.prefixStatus)}},prefixStatus:{deep:!0,handler(e){e&&(this.value=this.prefixStatus)}}},mounted(){this.noInvalid&&(this.value=this.prefixStatus)},methods:{...a(t,["setDefaultPrefix"]),handleSelect(e){this.setDefaultPrefix(e)}}},h={};var _=i(d,f,v,!1,g,"6ff34b10",null,null);function g(e){for(let t in h)this[t]=h[t]}_.options.__file="src/views/Setting/setprefix/SetPrefix.vue";const b=function(){return _.exports}();var k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-select",{attrs:{placeholder:"请选择主题"},on:{change:e.handleSelect},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.Options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)},x=[];k._withStripped=!0;const y={};var S=i({data:()=>({value:"",Options:[{label:"亮色主题",value:""},{label:"深色主题",value:"dark"}]}),mounted(){const e=localStorage.getItem("themeb2");e&&(this.value=JSON.parse(e).theme)},methods:{handleSelect(e){document.documentElement.className=this.value,localStorage.setItem("themeb2",JSON.stringify({theme:e}))}}},k,x,!1,C,null,null,null);function C(e){for(let t in y)this[t]=y[t]}S.options.__file="src/views/Setting/themeChange/ThemeChange.vue";const w=function(){return S.exports}();var E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"set-defalut"},[a("div",{staticStyle:{"margin-top":"20px","padding-bottom":"20px","border-bottom":"1px solid #f2f2f2"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio",{attrs:{label:"1",border:""}},[e._v("手动输入目录")]),a("el-radio",{attrs:{label:"2",border:""}},[e._v("自动填写目录")])],1)],1),"1"===e.radio?a("el-input",{attrs:{placeholder:"图片文件夹(格式：hexo/4/)"},model:{value:e.valuePrint,callback:function(t){e.valuePrint=t},expression:"valuePrint"}}):a("el-cascader",{attrs:{props:e.options,clearable:""},model:{value:e.valueAuto,callback:function(t){e.valueAuto=t},expression:"valueAuto"}}),a("el-button",{on:{click:e.saveDefault}},[e._v("保存")]),a("el-button",{on:{click:function(t){return e.$router.replace({name:"imanage"})}}},[e._v("返回")])],1)},F=[];E._withStripped=!0;const D={data:()=>({valueAuto:[],radio:"1",valuePrint:"",options:{lazy:!0,checkStrictly:!0,lazyLoad(e,t){let a="";const{level:l,pathLabels:i}=e,o=i&&i.reduce(((e,t)=>{if(l<=i.length)return`${e}${t}/`}),"");a=i?o:a,s(a).then((e=>{const a=e.length>0?e:[];t(a)}))}}}),computed:{...e(t,["defaultFile"])},mounted(){this.radio=this.defaultFile.methods,this.initData(this.radio)},methods:{initData(e){"1"===e?(this.valueAuto=[],this.valuePrint=this.defaultFile.valPt):(this.valuePrint="",this.valueAuto=this.defaultFile.valAt)},...a(t,["setDefaultFile"]),saveDefault(){const e={methods:this.radio,valAt:this.valueAuto,valPt:this.valuePrint};this.setDefaultFile(e),ELEMENT.Notification({message:"保存成功",type:"success"})}}},$={};var N=i(D,E,F,!1,L,"04bbfc34",null,null);function L(e){for(let t in $)this[t]=$[t]}N.options.__file="src/views/Setting/setDefault/SetDefault.vue";const T=function(){return N.exports}();var P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"set-commpress"},[a("el-switch",{attrs:{"active-text":"开启","inactive-text":"关闭","active-value":!0,"inactive-value":!1},on:{change:e.handleComp},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"block-compress"},[a("span",{staticClass:"demonstration"},[e._v("压缩等级("+e._s(e.value1)+")")]),a("div",{staticClass:"slide-w"},[a("el-slider",{attrs:{"show-input":"",step:.1,max:1,"show-stops":""},on:{change:e.handleComp},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1)])],1)},I=[];P._withStripped=!0;const M=t(),A={};var O=i({data:()=>({value:!1,value1:.8}),mounted(){this.$nextTick((()=>{this.value=M.CompressData.iscompress,this.value1=M.CompressData.rank}))},methods:{handleComp:function(e){const t={iscompress:this.value,rank:this.value1};M.setDefaultCompress(t),ELEMENT.Notification({title:"压缩功能提示",message:`上传压缩功能${this.value?"已开启":"已关闭"},${this.value?"压缩等级为:"+this.value1:""}`,type:"success"})}}},P,I,!1,U,"8fe18032",null,null);function U(e){for(let t in A)this[t]=A[t]}O.options.__file="src/views/Setting/setMain/SetCompress.vue";const q=function(){return O.exports}();var R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"set-upload"},[a("el-input",{attrs:{placeholder:"eg:hexo/2/"},model:{value:e.tofile,callback:function(t){e.tofile=t},expression:"tofile"}}),a("el-button",{on:{click:e.saveToFile}},[e._v("保存")]),a("el-button",{on:{click:function(t){return e.$router.replace({name:"home"})}}},[e._v("返回")])],1)},z=[];R._withStripped=!0;const J={data:()=>({tofile:""}),computed:{...e(t,["DefaultToFile"])},mounted(){this.tofile=this.DefaultToFile},methods:{...a(t,["setDefaultToFile"]),saveToFile(){const e="/"===this.tofile.slice(-1)||""===this.tofile;ELEMENT.Notification({title:"提示",message:e?`上传路径修改为：${this.tofile}`:"路径要以“/”结尾",type:e?"success":"error"}),e&&this.setDefaultToFile(this.tofile)}}},V={};var j=i(J,R,z,!1,B,"ef07802c",null,null);function B(e){for(let t in V)this[t]=V[t]}j.options.__file="src/views/Setting/setUploadFile/SetUpload.vue";const G=function(){return j.exports}();var H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-radio-group",{attrs:{size:"small"},on:{change:e.handleFormat},model:{value:e.radiov,callback:function(t){e.radiov=t},expression:"radiov"}},e._l(e.defaultcopyformat.formatList,(function(t,l){return a("el-tooltip",{key:l,staticClass:"item",attrs:{effect:"dark",content:t||"您还未定义",placement:"top-start"}},[a("el-radio",{attrs:{label:l,border:""}},[e._v(" "+e._s(l)+" ")])],1)})),1),"Custom"===e.radiov?a("div",[a("el-input",{staticStyle:{width:"217px","margin-top":"10px","margin-right":"10px"},attrs:{type:"text",placeholder:"自定义外链格式"},model:{value:e.custom,callback:function(t){e.custom=t},expression:"custom"}}),a("el-button",{on:{click:e.validCustom}},[e._v("保存")])],1):e._e()],1)},K=[];H._withStripped=!0;const Q={data:()=>({radiov:"",custom:""}),computed:{...e(t,["defaultcopyformat"]),...e(t,["defaultCopy"])},mounted(){this.radiov=this.defaultCopy,"Custom"===this.defaultCopy&&(this.custom=this.defaultcopyformat.formatList.Custom)},methods:{...a(t,["setDefaultFormat"]),...a(t,["setCustomFormat"]),handleFormat(e){"Custom"!==e?(this.setDefaultFormat(e),ELEMENT.Notification({title:"自定义格式",message:"已将格式设置为："+e,type:"success"})):ELEMENT.Notification({title:"自定义格式",message:"请在输入框中填写，格式 %s ，eg: ![](%s)",type:"warning"})},validCustom:l((function(){const e=/%s/g.test(this.custom);ELEMENT.Notification({title:"提示",message:e?`您当前的默认外链已设置为：${this.custom}`:"自定义格式有误，请将%s按照格式填写，例如：![](%s)",type:e?"success":"error"}),e&&(this.setDefaultFormat("Custom"),this.setCustomFormat(this.custom))}),300,!0)}},W={};var X=i(Q,H,K,!1,Y,null,null,null);function Y(e){for(let t in W)this[t]=W[t]}X.options.__file="src/views/Setting/setcopy/SetCopy.vue";const Z=function(){return X.exports}();var ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-switch",{attrs:{"active-text":"开启","inactive-text":"关闭","active-value":!0,"inactive-value":!1},on:{change:e.handleComp},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},te=[];ee._withStripped=!0;const ae={data:()=>({value:!1}),computed:{...e(t,["openUploadOutMD"])},mounted(){this.value=!!this.openUploadOutMD},methods:{handleComp(e){t().$patch({openUploadOutMD:e})}}},le={};var ie=i(ae,ee,te,!1,se,null,null,null);function se(e){for(let t in le)this[t]=le[t]}ie.options.__file="src/views/Setting/setdefaultCopy/SetDefaultCopy.vue";const oe=function(){return ie.exports}();var ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"common-container"},[a("h1",{staticClass:"set-tit"},[e._v("⌜全局配置⌟")]),a("el-collapse",{staticClass:"img-manage",attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-collapse-item",{attrs:{title:"🗝️ 密钥配置管理",name:"1"}},[a("form-view")],1),a("el-collapse-item",{attrs:{title:"📷 上传图片设置",name:"2"}},[a("h2",[e._v("是否开启默认上传Markdown模式")]),a("set-default-copy"),a("h2",[e._v("B2桶图片上传路径（文件夹路径/名称） "),a("span",{staticClass:"red-c"},[e._v("必填")]),e._v("（默认根目录下）")]),a("set-upload"),a("h2",[e._v("是否开启压缩")]),a("set-compress")],1),a("el-collapse-item",{attrs:{title:"🎃 页面图片管理",name:"3"}},[a("h2",[e._v("图片前缀(默认选择 host_url 在密钥配置中可修改)")]),a("set-prefix"),a("h2",[e._v("图片外链默认复制格式 "),a("span",{staticClass:"red-c"},[e._v("%s")]),e._v("为外链地址")]),a("set-copy"),a("h2",[e._v("默认检索的图片文件夹")]),a("set-default")],1),a("el-collapse-item",{attrs:{title:"🍥 主题设置",name:"4"}},[a("h2",[e._v("主题选择")]),a("theme-change")],1)],1)],1)},re=[];ne._withStripped=!0;const ue={};var ce=i({components:{FormView:m,SetPrefix:b,ThemeChange:w,SetDefault:T,SetCompress:q,SetUpload:G,SetCopy:Z,SetDefaultCopy:oe},data:()=>({activeName:""}),mounted(){const{id:e}=this.$route.query;e&&(this.activeName=e+"")}},ne,re,!1,pe,"0e0ad9a7",null,null);function pe(e){for(let t in ue)this[t]=ue[t]}ce.options.__file="src/views/Setting/Setting.vue";const me=function(){return ce.exports}();export{me as default};
